using System;
using System.Media;
using System.Windows.Forms;

namespace QuizApp
{
    public partial class Form1 : Form
    {
        // البيانات
        private string[] questions = {
            "ما هو جمع كلمة 'كتاب'؟",
            "من هو مؤلف كتاب 'الأيام'؟",
            // أضف بقية الأسئلة هنا
        };

        private string[][] choices = {
            new string[] { "مكتبات", "كتب", "كتيبات" },
            new string[] { "طه حسين", "نجيب محفوظ", "أحمد أمين" },
            // أضف بقية الخيارات هنا
        };

        private string[] correctAnswers = {
            "كتب", "طه حسين", // أضف بقية الإجابات الصحيحة هنا
        };

        private int currentQuestionIndex = 0;
        private int correctAnswersCount = 0;
        private int timeLeft = 15;
        private Timer timer;

        public Form1()
        {
            InitializeComponent();
            InitializeTimer();
            ShowQuestion(currentQuestionIndex);
        }

        private void InitializeTimer()
        {
            timer = new Timer();
            timer.Interval = 1000; // 1 ثانية
            timer.Tick += Timer_Tick;
        }

        private void Timer_Tick(object sender, EventArgs e)
        {
            timeLeft--;
            lblTimer.Text = timeLeft.ToString();

            if (timeLeft == 0)
            {
                timer.Stop();
                MessageBox.Show("انتهى الوقت!");
                ShowNextQuestion();
            }
        }

        private void ShowQuestion(int index)
        {
            if (index < questions.Length)
            {
                lblQuestion.Text = questions[index];
                btnChoice1.Text = choices[index][0];
                btnChoice2.Text = choices[index][1];
                btnChoice3.Text = choices[index][2];
                timeLeft = 15;
                lblTimer.Text = timeLeft.ToString();
                timer.Start();
            }
            else
            {
                ShowFinalResult();
            }
        }

        private void CheckAnswer(string selectedAnswer)
        {
            timer.Stop();

            if (selectedAnswer == correctAnswers[currentQuestionIndex])
            {
                PlaySound("correct.wav");
                MessageBox.Show("إجابة صحيحة! 😊");
                correctAnswersCount++;
            }
            else
            {
                PlaySound("wrong.wav");
                MessageBox.Show($"إجابة خاطئة! 😢 الإجابة الصحيحة هي: {correctAnswers[currentQuestionIndex]}");
            }
        }

        private void PlaySound(string soundFile)
        {
            try
            {
                SoundPlayer player = new SoundPlayer(soundFile);
                player.Play();
            }
            catch (Exception ex)
            {
                MessageBox.Show("حدث خطأ أثناء تشغيل الصوت: " + ex.Message);
            }
        }

        private void ShowFinalResult()
        {
            string resultMessage = $"نتيجتك النهائية: {correctAnswersCount} من {questions.Length}\n";

            if (correctAnswersCount >= 18)
                resultMessage += "ممتاز! أنت بطل اللغة العربية! 🏆";
            else if (correctAnswersCount >= 12)
                resultMessage += "جيد جداً! استمر في التعلم! 👍";
            else
                resultMessage += "لا بأس! المهم أنك تعلمت شيئاً جديداً. 💪";

            MessageBox.Show(resultMessage);
            MessageBox.Show("شكراً للمشاركة رحمون");
        }

        private void btnChoice1_Click(object sender, EventArgs e)
        {
            CheckAnswer(btnChoice1.Text);
        }

        private void btnChoice2_Click(object sender, EventArgs e)
        {
            CheckAnswer(btnChoice2.Text);
        }

        private void btnChoice3_Click(object sender, EventArgs e)
        {
            CheckAnswer(btnChoice3.Text);
        }

        private void btnSubmit_Click(object sender, EventArgs e)
        {
            CheckAnswer(txtAnswer.Text);
        }

        private void btnNext_Click(object sender, EventArgs e)
        {
            ShowNextQuestion();
        }

        private void btnPrevious_Click(object sender, EventArgs e)
        {
            ShowPreviousQuestion();
        }

        private void ShowNextQuestion()
        {
            currentQuestionIndex++;
            ShowQuestion(currentQuestionIndex);
        }

        private void ShowPreviousQuestion()
        {
            if (currentQuestionIndex > 0)
            {
                currentQuestionIndex--;
                ShowQuestion(currentQuestionIndex);
            }
        }
    }
}








